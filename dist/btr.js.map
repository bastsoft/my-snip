{"version":3,"sources":["../lib/import-gist.js","../lib/commands-queue.js","../lib/cy.js","../web/inquirer-ui.js","../web/fetch.js","btr.js"],"names":["fetchjsonp","document","gistId","then","data","files","el","createElement","innerHTML","div","gistFiles","querySelectorAll","i","length","html","outerHTML","text","textContent","replace","Queue","propertyName","that","_queue","isRun","main","Commands","add","name","promiseFunction","args","runThroughQueue","bind","payload","push","run","shift","queue","message","Promise","resolve","reject","console","log","err","time","options","setTimeout","callback","selector","context","value","dispatchEvent","CustomEvent","bubbles","evt","createEvent","clientRect","getBoundingClientRect","clientX","left","clientY","bottom","initMouseEvent","window","content","filter","innerText","indexOf","activeElement","parentElement","index","slice","cy","_elemId","_resolveCallback","_answers","prompt","promptsArray","type","_createList","listObj","menu","Math","random","toString","split","setAttribute","choices","forEach","answer","menuitem","addEventListener","_removeMenuById","appendChild","body","id","elem","getElementById","parentNode","removeChild","fetchscript","url","script","src","onreadystatechange","onload","String","fromCharCode","floor","Date","addSymbol","handler","readyState","getElementsByTagName","e","btr","Object","defineProperty","get","initEl","configurable","importGistId","inquirer","loadGist","gists","Function","file","load","loadModule","querySelector","head"],"mappings":"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","file":"btr.js","sourceRoot":"../src","sourcesContent":["export default function(fetchjsonp, document, gistId){\n    return fetchjsonp('https://gist.github.com/' + gistId + '.json').then(data=>{\n        var files = {};\n        var el = document.createElement('div');\n        el.innerHTML = data.div;\n  \n        var gistFiles = el.querySelectorAll('.gist-file .gist-data .file');\n  \n        for (var i = 0; i < gistFiles.length; i++) {\n            var fileName = data.files[i];\n            files[fileName] = {\n              html: gistFiles[i].outerHTML,\n              text: gistFiles[i].textContent.replace(\"This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\", \"\"),\n            };\n        }\n\n        return files;\n    });\n}","\nexport default class Queue {\n    constructor(propertyName) {   \n      const that = this;\n      this._queue = [];\n      this.isRun = false;\n      \n      const main = {\n        Commands: {\n          add(name, promiseFunction) {\n              main[propertyName][name] = (...args) => {\n                that.runThroughQueue(promiseFunction.bind(that, ...args));\n                \n                return main[propertyName];\n              };\n          }\n        },\n      };\n      \n      main[propertyName] = {};  \n       \n      return main;\n    }\n    \n    runThroughQueue(payload) {\n      this._queue.push(payload);\n      this.run();\n    }\n    \n    run() {\n      if (this._queue.length && !this.isRun) {\n          this.isRun = true;\n        \n          this._queue.shift()().then(() => {\n            this.isRun = false;\n            this.run();\n          });\n      }\n    }\n  };\n  ","export default function(Queue){\n    const queue = new Queue(\"cy\");\n\n    queue.Commands.add(\"log\", function(message) {\n      return new Promise((resolve, reject) => {\n        try {\n          console.log(message);\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n    \n    queue.Commands.add(\"wait\", function(time, options) {\n      return new Promise((resolve, reject) => {\n        try {\n          setTimeout(() => {\n            resolve();\n          }, time);\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n    \n    queue.Commands.add(\"then\", function(callback) {\n      return new Promise((resolve, reject) => {\n        try {\n          callback();\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"get\", function(selector, options) {\n      return new Promise((resolve, reject) => {\n        try {\n          const context = this;\n          const el = [...context.el[0].querySelectorAll(selector)];\n\n          if(el.length > 0){\n              context.el = el;\n              resolve();\n          }else{\n              reject();\n          }\n        }catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"find\", function(selector, options) {\n      return new Promise((resolve, reject) => {\n        try {\n          const context = this;\n          const el = [...context.el[0].querySelectorAll(selector)];\n\n          if(el.length > 0){\n              context.el = el;\n              resolve();\n          }else{\n              reject();\n          }\n        }catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n\n    queue.Commands.add(\"type\", function(text, options) {\n      return new Promise((resolve, reject) => {\n        const context = this;\n        try {\n          const value = text.replace(/[{backspace},{del},{downArrow},{end},{enter},{esc},{home},{insert},{leftArrow},{moveToEnd},{moveToStart},{pageDown},{pageUp},{rightArrow},{selectAll},{upArrow},{alt},{ctrl},{meta},{shift}]/g,\"\");\n          context.el[0].value = value;\n          context.el[0].dispatchEvent((new CustomEvent(\"input\", {\n              bubbles: true\n          })));\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"click\", function() {\n      return new Promise((resolve, reject) => {\n        const context = this;\n        try {\n          var evt = document.createEvent(\"MouseEvents\");\n\n          var clientRect = context.el[0].getBoundingClientRect();\n          var clientX = clientRect.left;\n          var clientY = clientRect.bottom;\n\n          evt.initMouseEvent(\"click\", true, true, window, 0, 0, 0, clientX, clientY, false, false, false, false, 0, null);\n\n          context.el[0].dispatchEvent(evt);\n\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"contains\", function(selector, content, options) {\n      return new Promise((resolve, reject) => {\n        const context = this;\n\n        try {\n          context.el = [...context.el[0].querySelectorAll(selector)].filter(el => el.innerText.indexOf(content) !== -1);\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"focus\", function(options) {\n      return new Promise((resolve, reject) => {\n        const context = this;\n\n        try {\n          context.el[0].dispatchEvent((new CustomEvent(\"focus\", {\n              bubbles: true\n          })));\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"focused\", function(options) {\n      return new Promise((resolve, reject) => {\n        const context = this;\n        \n        try {\n          context.el = [document.activeElement];\n            \n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"parent\", function() {\n      return new Promise((resolve, reject) => {\n        const context = this;\n        \n        try {\n          context.el = [context.el[0].parentElement];\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"last\", function() {\n      return new Promise((resolve, reject) => {\n        const context = this;\n        \n        try {\n          context.el = [context.el[context.el.length - 1]];\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"siblings\", function(selector) {\n      return new Promise((resolve, reject) => {\n        const context = this;\n        \n        try {\n          context.el = [context.el[0].parentElement];\n          context.el = [...context.el[0].querySelectorAll(selector)];\n\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"eq\", function(index) {\n      return new Promise((resolve, reject) => {\n        const context = this;\n        \n        try {\n          context.el = context.el.slice(index, index + 1);\n\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"initEl\", function(el) {\n      return new Promise((resolve, reject) => {\n        const context = this;\n        \n        try {\n          context.el = [el];\n\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    queue.Commands.add(\"showEl\", function(el) {\n      return new Promise((resolve, reject) => {\n        const context = this;\n        \n        try {\n          console.log(context.el);\n\n          resolve();\n        }\n        catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    return queue.cy;\n}\n","export default {\n    _elemId: null,\n    _resolveCallback: null,\n    _answers:null,\n    \n    prompt: function(promptsArray){\n      this._answers = {};\n      \n      if(promptsArray[0].type === \"list\"){\n        this._createList(promptsArray[0]);\n      }\n      \n      return new Promise((resolve, reject) => {\n      try {\n        this._resolveCallback = resolve;\n      }\n      catch (err) {\n        reject(err);\n      }\n    });\n    },\n    \n    _createList(listObj){\n      const menu = document.createElement('ul');\n      \n      this._answers = {}; \n      this._resolveCallback = null;\n      this._elemId = Math.random().toString().split(\".\")[1];\n      \n      menu.setAttribute('id', this._elemId);\n      menu.setAttribute('style', '\\\n          z-index: 2147483000;\\\n          position:fixed;\\\n          list-style-type:none;\\\n          margin:0;\\\n          padding: 0;\\\n          font-family: monospace;\\\n          font-size: 14px;\\\n          cursor: pointer;\\\n          top: 0;\\\n          left: 0;\\\n      ');\n      \n      listObj.choices.forEach((answer)=>{\n        const menuitem = document.createElement('li');\n        \n        menuitem.innerHTML = answer;\n        \n        menuitem.setAttribute('style', '\\\n          background: #eee;\\\n          padding: 10px;\\\n        ');\n        menuitem.setAttribute('onmouseover', 'this.style.backgroundColor=\"#555\";');\n        menuitem.setAttribute('onmouseout', 'this.style.backgroundColor=\"#eee\";');\n        \n        menuitem.addEventListener(\"click\", ()=>{\n            this._removeMenuById(this._elemId);\n              \n            if(this._resolveCallback ){\n              this._answers[listObj.name] = answer;\n              this._resolveCallback(this._answers);\n              this._resolveCallback = null;\n            }\n         }, false);\n        menu.appendChild(menuitem);\n      });\n      \n      document.body.appendChild(menu);\n    },\n    \n    _removeMenuById(id){\n      const elem = document.getElementById(id);\n      \n      elem.parentNode.removeChild(elem);\n    }\n  }\n  ","export function fetchscript(url, callback) {\n    var script = document.createElement('script');\n\n    script.type = 'text/javascript';\n    script.src = url;\n\n    if (callback) {\n        script.onreadystatechange = callback;\n        script.onload = callback;\n    }\n\n    return script;\n}\n\nexport function fetchjsonp(url) {\n    return new Promise(function(resolve, reject) {\n        try{\n            const id = String.fromCharCode(65 + Math.floor(Math.random() * 26)) + (+(new Date));\n            const addSymbol = url.indexOf(\"?\") !== -1 ? \"&\" : \"?\";\n            const handler = fetchscript.bind(this, url + addSymbol + 'callback=fun' + id);\n            const elem = handler(function () {\n                if (elem.readyState && elem.readyState !== \"complete\" && elem.readyState !== \"loaded\") {\n                    return false;\n                }\n\n                elem.parentNode.removeChild(elem);\n            });\n        \n            window['fun' + id] = function (data) {\n                resolve(data);\n                window['fun' + id] = null;\n            };\n\n            document.getElementsByTagName('head')[0].appendChild(elem);\n        }catch(e){\n            reject(e);\n        }\n    });\n}","import importGistId from \"../lib/import-gist.js\"\nimport Queue from \"../lib/commands-queue.js\";\nimport getCy from \"../lib/cy.js\";\n\nimport inquirer from \"../web/inquirer-ui.js\";\nimport {fetchjsonp} from \"../web/fetch.js\";\n\nwindow.btr = {};\nconst cy = getCy(Queue);\n\nObject.defineProperty(window, \"cy\", {\n    get: function () {\n        cy.initEl(document);\n\n        return cy;\n    },\n    configurable: true\n});\n\nbtr.context = {\n    importGistId,\n    inquirer,\n    fetchjsonp,\n    document\n};\n\nbtr.loadGist = function(data){\n    importGistId(fetchjsonp, document, data.id).then(gists => {\n        const load = new Function('{ importGistId, inquirer, fetchjsonp, document}',  gists[data.file].text);\n        load(btr.context);\n    });\n};\n\nbtr.loadModule = function(url){\n    const script = document.createElement('script');\n    const id = String.fromCharCode(65 + Math.floor(Math.random() * 26)) + (+(new Date));\n\n    window['delete' + id] = ()=>{\n      console.log('delete' + id);\n      const elem = document.querySelector(\"#\" + id);\n      elem.parentNode.removeChild(elem);\n      \n      delete window['delete' + id];\n    };\n\n    script.type = 'module';\n    script.id = id;\n    script.text = `\n    import exapleMenu1 from \"${url}\";\n    \n    exapleMenu1(btr.context);\n\n    delete${id}();\n    `;\n\n    script.onreadystatechange = onload;\n    script.onload = onload;\n    \n\n    document.head.appendChild(script);\n  };\n"]}